



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Abinit documentation">
      
      
        <link rel="canonical" href="https://docs.abinit.org/tutorial/paral_mbt/">
      
      
        <meta name="author" content="The Abinit group">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.6.6">
    
    
      
        <title>Many-Body - abinit</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.78aab2dc.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.6079476c.css">
      
    
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    

    <!-- Jquery from Google CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Load Jquery UI -->
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <!-- Handle jQuery plugin naming conflict between jQuery UI and Bootstrap 
    https://stackoverflow.com/questions/13731400/jqueryui-tooltips-are-competing-with-twitter-bootstrap
    -->
    <script>
      $.widget.bridge('uibutton', $.ui.button);
      $.widget.bridge('uitooltip', $.ui.tooltip);
    </script>

    <!--
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/pepper-grinder/jquery-ui.css">
    -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.11.0/build/css/themes/bootstrap.min.css"/>

    <!-- Bootstrap http://getbootstrap.com/getting-started/ -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" 
    integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous">
    </script>

    <!-- font-awesome -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    

    <!--Pace support. http://github.hubspot.com/pace/ -->
    <script>
        paceOptions = {
            ajax: true,      // disabled
            document: true,  // activated
            eventLag: false  // disabled
            //target: 'article'
            //elements: {selectors: ['.my-page']}
        };
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/white/pace-theme-big-counter.min.css" />
    <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/white/pace-theme-bounce.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-corner-indicator.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-flat-top.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-loading-bar.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-center-atom.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-flash.min.css" />
    -->

    <!-- MathJax support
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script> 
    -->
    <!--
    This is compatible with plotly.
    -->
    <script type="text/javascript" async 
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_SVG">
    </script> 

    <!--
    Configure MathJax to produce automatic equation numbers http://docs.mathjax.org/en/latest/tex.html
    -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        //jax: ["input/TeX","output/HTML-CSS"],
        //tex2jax: {inlineMath: [['$','$']]},
        //displayAlign: "center",
        TeX: {
            equationNumbers: { autoNumber: "AMS" },
            extensions: ["AMSmath.js", "boldsymbol.js"],
            Macros: {
                "*": "{\\dagger}",
                "ra": "{\\rangle}",
                "la": "{\\langle}",
                // Workaround for bm package. See https://github.com/mathjax/MathJax/issues/1219
                bm: ["{\\boldsymbol #1}",1],
                // Mathcal symbols
                mcL: "{\\mathcal{L}}",
                mcG: "{\\mathcal{G}}",
                mcR: "{\\mathcal{R}}",
                mcS: "{\\mathcal{S}}",
                mcC: "{\\mathcal{C}}",
                mcO: "{\\mathcal{O}}",
                // Acronyms
                KS: "{\\text{KS}}",
                eph: "{\\text{e-ph}}",
                ee: "{\\text{e-e}}",
                phph: "{\\text{ph-ph}}",
                FM: "{\\text{FM}}",
                DW: "{\\text{DW}}",
                QP: "{\\text{QP}}",
                BZ: "{\\text{BZ}}",
                sign: "{\\text{sign}}",
                xc: "{\\text{xc}}",
                tchi: "{\\tilde\\chi}",
                // Symbols commonly used (k-points, eigenvalues ...)
                rr: "{\\bf r}",
                RR: "{\\bf R}",
                tt: "{\\bf t}",
                GG: "{\\bf G}",
                kk: "{\\bf k}",
                qq: "{\\bf q}",
                kq: "{\\kk + \\qq}",
                qG: "{\\bf q + G}",
                kG: "{\\bf k + G}",
                kmq: "{\\kk - \\qq}",
                kpq: "{\\kk + \\qq}",
                kpG: "{\\kk + \\GG}",
                qpG: "{\\qq + \\GG}",
                nk: "{n \\kk}",
                enk: "{\\varepsilon_\\nk}",
                emkq: "{\\varepsilon_{m\\kk+\\qq}}",
                qnu: "{\\qq \\nu}",
                wqnu: "{\\omega_{\\qnu}}",
                vnk: "{\\mathbf{v}_{n\\kk}}",
                vmkq: "{\\mathbf{v}_{m\\kk+\\qq}}",
                vnka: "{\\mathrm{v}_{n\\kk,\\alpha}}",
                vnkb: "{\\mathrm{v}_{n\\kk,\\beta}}",
                ef: "{\\varepsilon_F}",
                // EPH quantities
                gkkp: "{g_{mn\\nu}(\\kk,\\qq)}",
                gkq: "{g_{mn\\nu}(\\kk,\\qq)}",
                //\newcommand{\gkkpL}{g_{mn\nu}^\Lc(\kb,\qb)}
                // Many-body theory
                Go: "{G_0}",
                Wo: "{W_0}",
                Ueff: "{U_{\\text{eff}}}",
                // Greek symbols + tilde version
                ee: "{\\epsilon}",
                tee: "{\\tilde{\\epsilon}}",
                ww: "{\\omega}",
                tww: "{\\tilde\\omega}",
                dd: "{\\,\\text{d}}",
                vxc: "{v_\\xc}",
                // symrel
                Ri: "{\\mcR^{-1}}",
                Rit: "{\\mcR^{-1\\tau}}",
                // symrec
                Si: "{\\mcS^{-1}}}",
                Sit: "{\\Si^\\tau}}",
                // partial and functional derivative.
                PDER: ["{\\dfrac{\\partial #1}{\\partial #2}}", 2],
                FDER: ["{\\dfrac{\\delta #1}{\\delta #2}}", 2],
                // PAW
                tPsi: "{\\tilde\\Psi}",
                tpsi: "{\\tilde\\psi}",
                tPhi: "{\\tilde\\Phi}",
                tphi: "{\\tilde\\phi}",
                tprj: "{\\tilde p}"
            }
          }
      });
    </script>

    <!-- See http://docs.mathjax.org/en/latest/start.html 
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js", "MathMenu.js", "MathZoom.js"],
        jax: ["input/TeX", "output/HTML-CSS", "output/NativeMML],
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"] ],
            displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
            processEscapes: true
        },
        "HTML-CSS": { availableFonts: ["TeX"] }
      });
    </script>
    -->

    
    
    

    <!-- Introjs for Guided Tour -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/intro.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/2.7.0/introjs.min.css" />

    <!-- Load fonts used for input variables -->
    <!--
    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono" rel="stylesheet">
    -->
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">

    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/gallery.css">
    
      <link rel="stylesheet" href="../../css/my_codehilite.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-orange">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#parallelism-for-many-body-calculations" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.abinit.org" title="abinit" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo-abinit-2015.png" width="48" height="48">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Tutorial
                </span>
              
                <span class="md-header-nav__parent">
                  Parallelism
                </span>
              
            
            Many-Body
          
        </span>
      </div>
      <!-- Guided Tour with introjs. Add glow effect to button only if homepage -->
      <div class="md-flex__cell md-flex__cell--shrink">
           
          
          <a href="#" class="btn btn-xs btn-default  " id="guided-tour-button" title="Guided Tour" 
              onclick="abidocs_guidedtour()">
           <span class="fa fa-info-circle"></span></a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/abinit/abinit/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      github-abinit
    </div>
  </a>

          </div>
        </div>
      
      <div class="md-flex__cell md-flex__cell--shrink" id="previous_published_versions">
        <div class="dropdown">
          <button class="btn btn-basic btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
            9.4.0
          <span class="caret"></span></button>
          <ul class="dropdown-menu">
            
          </ul>
        </div>
      </div>

    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." title="User Guide" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../topics/features/" title="Topics" class="md-tabs__link">
          Topics
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../variables/" title="Variables" class="md-tabs__link">
          Variables
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Tutorial" class="md-tabs__link md-tabs__link--active">
          Tutorial
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../theory/geometry/" title="Theory" class="md-tabs__link">
          Theory
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../developers/git_and_gitlab/" title="Developers" class="md-tabs__link">
          Developers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/release-notes/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/logo-abinit-2015.png" width="24" height="24">
      
    </span>
    abinit
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/abinit/abinit/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      github-abinit
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../.." title="NewUser" class="md-nav__link">
      NewUser
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/abinit/" title="Abinit" class="md-nav__link">
      Abinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/aim/" title="Aim" class="md-nav__link">
      Aim
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/anaddb/" title="Anaddb" class="md-nav__link">
      Anaddb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/cut3d/" title="Cut3d" class="md-nav__link">
      Cut3d
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/fold2bloch/" title="Fold2Bloch" class="md-nav__link">
      Fold2Bloch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/mrgddb/" title="Mrgddb" class="md-nav__link">
      Mrgddb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/mrgscr/" title="Mrgscr" class="md-nav__link">
      Mrgscr
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/multibinit/" title="Multibinit" class="md-nav__link">
      Multibinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/respfn/" title="Respfn" class="md-nav__link">
      Respfn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/spacegroup/" title="Spacegroup" class="md-nav__link">
      Spacegroup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../guide/a-TDEP/" title="a-TDEP" class="md-nav__link">
      a-TDEP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1-14" type="checkbox" id="nav-1-14">
    
    <label class="md-nav__link" for="nav-1-14">
      Installation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-1-14">
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../installation/" title="HowTo" class="md-nav__link">
      HowTo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL_MacOS/" title="MacOS" class="md-nav__link">
      MacOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL_Ubuntu/" title="Ubuntu" class="md-nav__link">
      Ubuntu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL_CentOS/" title="CentOS" class="md-nav__link">
      CentOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL_EasyBuild/" title="EasyBuild" class="md-nav__link">
      EasyBuild
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../INSTALL_gpu/" title="GPUs" class="md-nav__link">
      GPUs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Topics
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Topics
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/features/" title="Features" class="md-nav__link">
      Features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/" title="Topic List" class="md-nav__link">
      Topic List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Abipy/" title="Abipy" class="md-nav__link">
      Abipy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/APPA/" title="APPA" class="md-nav__link">
      APPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Artificial/" title="Artificial" class="md-nav__link">
      Artificial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/AtomManipulator/" title="AtomManipulator" class="md-nav__link">
      AtomManipulator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/AtomTypes/" title="AtomTypes" class="md-nav__link">
      AtomTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Bader/" title="Bader" class="md-nav__link">
      Bader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Band2eps/" title="Band2eps" class="md-nav__link">
      Band2eps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Berry/" title="Berry" class="md-nav__link">
      Berry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/BandOcc/" title="BandOcc" class="md-nav__link">
      BandOcc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/BSE/" title="BSE" class="md-nav__link">
      BSE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/BoundingProcess/" title="BoundingProcess" class="md-nav__link">
      BoundingProcess
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ConstrainedDFT/" title="ConstrainedDFT" class="md-nav__link">
      ConstrainedDFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ConstrainedPol/" title="ConstrainedPol" class="md-nav__link">
      ConstrainedPol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Control/" title="Control" class="md-nav__link">
      Control
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Coulomb/" title="Coulomb" class="md-nav__link">
      Coulomb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/CrossingBarriers/" title="CrossingBarriers" class="md-nav__link">
      CrossingBarriers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/CRPA/" title="CRPA" class="md-nav__link">
      CRPA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/crystal/" title="Crystal" class="md-nav__link">
      Crystal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DFT+U/" title="DFT+U" class="md-nav__link">
      DFT+U
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DeltaSCF/" title="DeltaSCF" class="md-nav__link">
      DeltaSCF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DensityPotential/" title="DensityPotential" class="md-nav__link">
      DensityPotential
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Dev/" title="Dev" class="md-nav__link">
      Dev
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DFPT/" title="DFPT" class="md-nav__link">
      DFPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DMFT/" title="DMFT" class="md-nav__link">
      DMFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/DynamicsMultibinit/" title="DynamicsMultibinit" class="md-nav__link">
      DynamicsMultibinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/EffectiveMass/" title="EffectiveMass" class="md-nav__link">
      EffectiveMass
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/EFG/" title="EFG" class="md-nav__link">
      EFG
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Elastic/" title="Elastic" class="md-nav__link">
      Elastic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElPhonInt/" title="ElPhonInt" class="md-nav__link">
      ElPhonInt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElPhonTransport/" title="ElPhonTransport" class="md-nav__link">
      ElPhonTransport
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElecDOS/" title="ElecDOS" class="md-nav__link">
      ElecDOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ElecBandStructure/" title="ElecBandStructure" class="md-nav__link">
      ElecBandStructure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/FileFormats/" title="FileFormats" class="md-nav__link">
      FileFormats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/FitProcess/" title="FitProcess" class="md-nav__link">
      FitProcess
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/ForcesStresses/" title="ForcesStresses" class="md-nav__link">
      ForcesStresses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/FrequencyMeshMBPT/" title="FrequencyMeshMBPT" class="md-nav__link">
      FrequencyMeshMBPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GeoConstraints/" title="GeoConstraints" class="md-nav__link">
      GeoConstraints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GeoOpt/" title="GeoOpt" class="md-nav__link">
      GeoOpt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Git/" title="Git" class="md-nav__link">
      Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GSintroduction/" title="GSintroduction" class="md-nav__link">
      GSintroduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GW/" title="GW" class="md-nav__link">
      GW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/GWls/" title="GWls" class="md-nav__link">
      GWls
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Hybrids/" title="Hybrids" class="md-nav__link">
      Hybrids
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/k-points/" title="K points" class="md-nav__link">
      K points
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/LatticeModel/" title="LatticeModel" class="md-nav__link">
      LatticeModel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/LDAminushalf/" title="LDAminushalf" class="md-nav__link">
      LDAminushalf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/LOTF/" title="LOTF" class="md-nav__link">
      LOTF
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/longwave/" title="Longwave" class="md-nav__link">
      Longwave
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Macroave/" title="Macroave" class="md-nav__link">
      Macroave
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/MagField/" title="MagField" class="md-nav__link">
      MagField
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/MagMom/" title="MagMom" class="md-nav__link">
      MagMom
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/MolecularDynamics/" title="MolecularDynamics" class="md-nav__link">
      MolecularDynamics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/multidtset/" title="Multidtset" class="md-nav__link">
      Multidtset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/nonlinear/" title="Nonlinear" class="md-nav__link">
      Nonlinear
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Output/" title="Output" class="md-nav__link">
      Output
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/parallelism/" title="Parallelism" class="md-nav__link">
      Parallelism
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PAW/" title="PAW" class="md-nav__link">
      PAW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PIMD/" title="PIMD" class="md-nav__link">
      PIMD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Planewaves/" title="Planewaves" class="md-nav__link">
      Planewaves
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Phonons/" title="Phonons" class="md-nav__link">
      Phonons
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PhononBands/" title="PhononBands" class="md-nav__link">
      PhononBands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PhononWidth/" title="PhononWidth" class="md-nav__link">
      PhononWidth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PortabilityNonRegression/" title="PortabilityNonRegression" class="md-nav__link">
      PortabilityNonRegression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/positron/" title="Positron" class="md-nav__link">
      Positron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/printing/" title="Printing" class="md-nav__link">
      Printing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/PseudosPAW/" title="PseudosPAW" class="md-nav__link">
      PseudosPAW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/q-points/" title="Q points" class="md-nav__link">
      Q points
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/RandStopPow/" title="RandStopPow" class="md-nav__link">
      RandStopPow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Recursion/" title="Recursion" class="md-nav__link">
      Recursion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/RPACorrEn/" title="RPACorrEn" class="md-nav__link">
      RPACorrEn
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SCFControl/" title="SCFControl" class="md-nav__link">
      SCFControl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SCFAlgorithms/" title="SCFAlgorithms" class="md-nav__link">
      SCFAlgorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SelfEnergy/" title="SelfEnergy" class="md-nav__link">
      SelfEnergy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SmartSymm/" title="SmartSymm" class="md-nav__link">
      SmartSymm
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/spinpolarisation/" title="Spinpolarisation" class="md-nav__link">
      Spinpolarisation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/SpinDynamicsMultibinit/" title="SpinDynamicsMultibinit" class="md-nav__link">
      SpinDynamicsMultibinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/STM/" title="STM" class="md-nav__link">
      STM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Susceptibility/" title="Susceptibility" class="md-nav__link">
      Susceptibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TDDFT/" title="TDDFT" class="md-nav__link">
      TDDFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/a-TDEP/" title="a TDEP" class="md-nav__link">
      a TDEP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TDepES/" title="TDepES" class="md-nav__link">
      TDepES
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Temperature/" title="Temperature" class="md-nav__link">
      Temperature
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TransPath/" title="TransPath" class="md-nav__link">
      TransPath
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/TuningSpeedMem/" title="TuningSpeedMem" class="md-nav__link">
      TuningSpeedMem
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Unfolding/" title="Unfolding" class="md-nav__link">
      Unfolding
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/UnitCell/" title="UnitCell" class="md-nav__link">
      UnitCell
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/vdw/" title="Vdw" class="md-nav__link">
      Vdw
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Verification/" title="Verification" class="md-nav__link">
      Verification
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Wannier/" title="Wannier" class="md-nav__link">
      Wannier
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/Wavelets/" title="Wavelets" class="md-nav__link">
      Wavelets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/xc/" title="Xc" class="md-nav__link">
      Xc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../topics/external_resources/" title="External Resources" class="md-nav__link">
      External Resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Variables
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Variables
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/" title="All Variables" class="md-nav__link">
      All Variables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Abinit
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Abinit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/basic/" title="Basic" class="md-nav__link">
      Basic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/bse/" title="Bethe-Salpeter" class="md-nav__link">
      Bethe-Salpeter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/dev/" title="Developers" class="md-nav__link">
      Developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/dmft/" title="DMFT" class="md-nav__link">
      DMFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/eph/" title="Electron-Phonon" class="md-nav__link">
      Electron-Phonon
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/ffield/" title="Varff" class="md-nav__link">
      Varff
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/files/" title="File-handling" class="md-nav__link">
      File-handling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/geo/" title="Geometry" class="md-nav__link">
      Geometry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/gstate/" title="Ground-State" class="md-nav__link">
      Ground-State
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/gw/" title="GW" class="md-nav__link">
      GW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/internal/" title="Internal" class="md-nav__link">
      Internal
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/paral/" title="Parallelism" class="md-nav__link">
      Parallelism
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/paw/" title="PAW" class="md-nav__link">
      PAW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/dfpt/" title="DFPT" class="md-nav__link">
      DFPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/rlx/" title="Relaxation" class="md-nav__link">
      Relaxation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/vdw/" title="VdW" class="md-nav__link">
      VdW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/w90/" title="Wannier90" class="md-nav__link">
      Wannier90
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/anaddb/" title="Anaddb" class="md-nav__link">
      Anaddb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/multibinit/" title="Multibinit" class="md-nav__link">
      Multibinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/atdep/" title="a-TDEP" class="md-nav__link">
      a-TDEP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/aim/" title="Aim" class="md-nav__link">
      Aim
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/external_parameters/" title="External Parameters" class="md-nav__link">
      External Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../variables/varset_stats/" title="Statistics" class="md-nav__link">
      Statistics
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../compilation/" title="Building Abinit" class="md-nav__link">
      Building Abinit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Base Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Base Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../base1/" title="Base1" class="md-nav__link">
      Base1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../base2/" title="Base2" class="md-nav__link">
      Base2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../base3/" title="Base3" class="md-nav__link">
      Base3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../base4/" title="Base4" class="md-nav__link">
      Base4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spin/" title="Spin" class="md-nav__link">
      Spin
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      PAW
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        PAW
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../paw1/" title="PAW1" class="md-nav__link">
      PAW1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paw2/" title="PAW2" class="md-nav__link">
      PAW2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paw3/" title="PAW3" class="md-nav__link">
      PAW3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      DFT_PLUS_U
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        DFT_PLUS_U
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../dftu/" title="Dftu" class="md-nav__link">
      Dftu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../udet/" title="Udet" class="md-nav__link">
      Udet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ucalc_crpa/" title="Ucalc crpa" class="md-nav__link">
      Ucalc crpa
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      DFPT
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        DFPT
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rf1/" title="RF1" class="md-nav__link">
      RF1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rf2/" title="RF2" class="md-nav__link">
      RF2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../elastic/" title="Elastic" class="md-nav__link">
      Elastic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ffield/" title="Ffield" class="md-nav__link">
      Ffield
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nlo/" title="Nlo" class="md-nav__link">
      Nlo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dmft/" title="DMFT" class="md-nav__link">
      DMFT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      EPH
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        EPH
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eph_intro/" title="Eph intro" class="md-nav__link">
      Eph intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eph4mob/" title="Eph4mob" class="md-nav__link">
      Eph4mob
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eph4zpr/" title="Eph4zpr" class="md-nav__link">
      Eph4zpr
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-9" type="checkbox" id="nav-4-9">
    
    <label class="md-nav__link" for="nav-4-9">
      EPH-legacy
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-9">
        EPH-legacy
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../eph/" title="Eph" class="md-nav__link">
      Eph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tdepes/" title="Tdepes" class="md-nav__link">
      Tdepes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-10" type="checkbox" id="nav-4-10">
    
    <label class="md-nav__link" for="nav-4-10">
      Many-Body
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-10">
        Many-Body
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../gw1/" title="GW1" class="md-nav__link">
      GW1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../gw2/" title="GW2" class="md-nav__link">
      GW2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bse/" title="Bethe-Salpeter" class="md-nav__link">
      Bethe-Salpeter
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-11" type="checkbox" id="nav-4-11" checked>
    
    <label class="md-nav__link" for="nav-4-11">
      Parallelism
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-11">
        Parallelism
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../basepar/" title="Base" class="md-nav__link">
      Base
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_gspw/" title="GSPW" class="md-nav__link">
      GSPW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_gswvl/" title="GSWVL" class="md-nav__link">
      GSWVL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_dfpt/" title="DFPT" class="md-nav__link">
      DFPT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_images/" title="Images" class="md-nav__link">
      Images
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Many-Body
      </label>
    
    <a href="./" title="Many-Body" class="md-nav__link md-nav__link--active">
      Many-Body
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#g0w0-corrections-in-quartz-sio2" title="G0W0 corrections in &alpha;-quartz SiO2." class="md-nav__link">
    G0W0 corrections in &alpha;-quartz SiO2.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-generating-the-wfk-file-in-parallel" title="1 Generating the WFK file in parallel" class="md-nav__link">
    1 Generating the WFK file in parallel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-computing-the-screening-in-parallel-using-the-adler-wiser-expression" title="2 Computing the screening in parallel using the Adler-Wiser expression" class="md-nav__link">
    2 Computing the screening in parallel using the Adler-Wiser expression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2d-manual-parallelization-over-q-points" title="2.d Manual parallelization over q-points." class="md-nav__link">
    2.d Manual parallelization over q-points.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-computing-the-screening-in-parallel-using-the-hilbert-transform-method" title="3 Computing the screening in parallel using the Hilbert transform method" class="md-nav__link">
    3 Computing the screening in parallel using the Hilbert transform method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-computing-the-one-shot-gw-corrections-in-parallel" title="4 Computing the one-shot GW corrections in parallel" class="md-nav__link">
    4 Computing the one-shot GW corrections in parallel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-basic-rules-for-efficient-parallel-calculations" title="5 Basic rules for efficient parallel calculations" class="md-nav__link">
    5 Basic rules for efficient parallel calculations
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paral_moldyn/" title="Moldyn" class="md-nav__link">
      Moldyn
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-12" type="checkbox" id="nav-4-12">
    
    <label class="md-nav__link" for="nav-4-12">
      Multibinit
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-12">
        Multibinit
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lattice_model/" title="Lattice Model" class="md-nav__link">
      Lattice Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../spin_model/" title="Spin Model" class="md-nav__link">
      Spin Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cut3d/" title="Cut3d" class="md-nav__link">
      Cut3d
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fold2bloch/" title="Fold2bloch" class="md-nav__link">
      Fold2bloch
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../nuc/" title="Nuc" class="md-nav__link">
      Nuc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../optic/" title="Optic" class="md-nav__link">
      Optic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../positron/" title="Positron" class="md-nav__link">
      Positron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tddft/" title="Tddft" class="md-nav__link">
      Tddft
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wannier90/" title="Wannier90" class="md-nav__link">
      Wannier90
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Theory
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Theory
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/geometry/" title="Geometry" class="md-nav__link">
      Geometry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/spherical_harmonics/" title="Spherical Harmonics" class="md-nav__link">
      Spherical Harmonics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/wavefunctions/" title="Wavefunctions" class="md-nav__link">
      Wavefunctions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/noncollinear/" title="Noncollinear" class="md-nav__link">
      Noncollinear
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/pseudopotentials/" title="Pseudopotentials" class="md-nav__link">
      Pseudopotentials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/mbt/" title="Many-Body Perturbation Theory" class="md-nav__link">
      Many-Body Perturbation Theory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/bse/" title="Bethe-Salpeter" class="md-nav__link">
      Bethe-Salpeter
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/documents/" title="Documents" class="md-nav__link">
      Documents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/acknowledgments/" title="Acknowledgments" class="md-nav__link">
      Acknowledgments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../theory/bibliography/" title="Bibliography" class="md-nav__link">
      Bibliography
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/git_and_gitlab/" title="Git and Gitlab" class="md-nav__link">
      Git and Gitlab
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/developers_howto/" title="HowTo for developers" class="md-nav__link">
      HowTo for developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/abimkdocs/" title="Abimkdocs" class="md-nav__link">
      Abimkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Test Suite
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Test Suite
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/testsuite/" title="Test list" class="md-nav__link">
      Test list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/testsuite_howto/" title="Test Suite Howto" class="md-nav__link">
      Test Suite Howto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/new_testsuite/" title="YAML-based test suite Howto" class="md-nav__link">
      YAML-based test suite Howto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/yaml_tools_api/" title="YAML-based test suite Python tools and API" class="md-nav__link">
      YAML-based test suite Python tools and API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/XgType/" title="XgType" class="md-nav__link">
      XgType
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7">
    
    <label class="md-nav__link" for="nav-6-7">
      Pseudos
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        Pseudos
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp1_info/" title="psp1" class="md-nav__link">
      psp1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp3_info/" title="psp3" class="md-nav__link">
      psp3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp45_info/" title="psp45" class="md-nav__link">
      psp45
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp5spinorbit_info/" title="psp5" class="md-nav__link">
      psp5
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp6_info/" title="psp6" class="md-nav__link">
      psp6
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/psp8_info/" title="psp8" class="md-nav__link">
      psp8
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/codestats/" title="Code stats" class="md-nav__link">
      Code stats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/autoconf_examples/" title="Autoconf_examples" class="md-nav__link">
      Autoconf_examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../developers/testlink/" title="Test Page for linkcheck" class="md-nav__link">
      Test Page for linkcheck
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/release-notes/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/history/" title="History" class="md-nav__link">
      History
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#g0w0-corrections-in-quartz-sio2" title="G0W0 corrections in &alpha;-quartz SiO2." class="md-nav__link">
    G0W0 corrections in &alpha;-quartz SiO2.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-generating-the-wfk-file-in-parallel" title="1 Generating the WFK file in parallel" class="md-nav__link">
    1 Generating the WFK file in parallel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-computing-the-screening-in-parallel-using-the-adler-wiser-expression" title="2 Computing the screening in parallel using the Adler-Wiser expression" class="md-nav__link">
    2 Computing the screening in parallel using the Adler-Wiser expression
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#2d-manual-parallelization-over-q-points" title="2.d Manual parallelization over q-points." class="md-nav__link">
    2.d Manual parallelization over q-points.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-computing-the-screening-in-parallel-using-the-hilbert-transform-method" title="3 Computing the screening in parallel using the Hilbert transform method" class="md-nav__link">
    3 Computing the screening in parallel using the Hilbert transform method
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-computing-the-one-shot-gw-corrections-in-parallel" title="4 Computing the one-shot GW corrections in parallel" class="md-nav__link">
    4 Computing the one-shot GW corrections in parallel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-basic-rules-for-efficient-parallel-calculations" title="5 Basic rules for efficient parallel calculations" class="md-nav__link">
    5 Basic rules for efficient parallel calculations
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              

                
                  <a href="https://github.com/abinit/abinit/edit/master/doc/tutorial/paral_mbt.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="parallelism-for-many-body-calculations">Parallelism for many-body calculations<a class="headerlink" href="#parallelism-for-many-body-calculations" title="Permanent link">&para;</a></h1>
<h2 id="g0w0-corrections-in-quartz-sio2">G<sub>0</sub>W<sub>0</sub> corrections in &alpha;-quartz SiO<sub>2</sub>.<a class="headerlink" href="#g0w0-corrections-in-quartz-sio2" title="Permanent link">&para;</a></h2>
<p>This tutorial aims at showing how to perform parallel calculations with the GW
part of ABINIT. We will discuss the approaches used to parallelize the
different steps of a typical G<sub>0</sub>W<sub>0</sub> calculation, and how to setup the parameters
of the run in order to achieve good speedup. -quartz SiO<sub>2</sub> is used as test case.</p>
<p>It is supposed that you have some knowledge about UNIX/Linux, and you know how to submit MPI jobs.
You are supposed to know already some basics of parallelism in ABINIT,
explained in the tutorial <a href="../basepar/">A first introduction to ABINIT in parallel</a>.</p>
<p>In the following, when &ldquo;run ABINIT over nn CPU cores&rdquo; appears, you have to use
a specific command line according to the operating system and architecture of
the computer you are using. This can be for instance:</p>
<div class="codehilite"><pre><span></span><code>mpirun -n nn abinit abinit.abi
</code></pre></div>

<p>or the use of a specific submission file.</p>
<p>This tutorial should take about 1.5 hour and requires a modern 
computer cluster of 20 CPU cores or more.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Supposing you made your own installation of ABINIT, the input files to run the examples
are in the <em>~abinit/tests/</em> directory where <em>~abinit</em> is the <strong>absolute path</strong> of the abinit top-level directory.
If you have NOT made your own install, ask your system administrator where to find the package,
especially the executable and test files.</p>
<p>In case you work on your own PC or workstation, to make things easier, we suggest you define
some handy environment variables by executing the following lines in the terminal:</p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span> <span class="nv">ABI_HOME</span><span class="o">=</span>Replace_with_absolute_path_to_abinit_top_level_dir <span class="c1"># Change this line</span>
<span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$ABI_HOME</span>/src/98_main/:<span class="nv">$PATH</span>      <span class="c1"># Do not change this line: path to executable</span>
<span class="nb">export</span> <span class="nv">ABI_TESTS</span><span class="o">=</span><span class="nv">$ABI_HOME</span>/tests/             <span class="c1"># Do not change this line: path to tests dir</span>
<span class="nb">export</span> <span class="nv">ABI_PSPDIR</span><span class="o">=</span><span class="nv">$ABI_TESTS</span>/Psps_for_tests/  <span class="c1"># Do not change this line: path to pseudos dir</span>
</code></pre></div>
<p>Examples in this tutorial use these shell variables: copy and paste
the code snippets into the terminal (<strong>remember to set ABI_HOME first!</strong>) or, alternatively,
source the <code>set_abienv.sh</code> script located in the <em>~abinit</em> directory:</p>
<div class="highlight"><pre><span></span><code><span class="nb">source</span> ~abinit/set_abienv.sh
</code></pre></div>
<p>The &lsquo;export PATH&rsquo; line adds the directory containing the executables to your <a href="http://www.linfo.org/path_env_var.html">PATH</a>
so that you can invoke the code by simply typing <em>abinit</em> in the terminal instead of providing the absolute path.</p>
<p>To execute the tutorials, create a working directory (<code>Work*</code>) and
copy there the input files of the lesson.</p>
<p>Most of the tutorials do not rely on parallelism (except specific <a class="wikilink lesson-wikilink" href="../basepar">tutorials on parallelism</a>).
However you can run most of the tutorial examples in parallel with MPI, see the <a class="wikilink topic-wikilink" data-content="How to set parameters for a parallel calculation" data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../topics/parallelism">topic on parallelism</a>.</p>
</div>
<h2 id="1-generating-the-wfk-file-in-parallel">1 Generating the WFK file in parallel<a class="headerlink" href="#1-generating-the-wfk-file-in-parallel" title="Permanent link">&para;</a></h2>
<p>Before beginning, you should create a working directory in <em>$ABI_TESTS/tutoparal/Input</em>
whose name might be <em>Work_mbt</em>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> <span class="nv">$ABI_TESTS</span>/tutoparal/Input/
mkdir Work_mbt <span class="o">&amp;&amp;</span> <span class="nb">cd</span> Work_mbt
</code></pre></div>
<p>The input files necessary to run the examples related to this tutorial are
located in the directory <em>$ABI_TESTS/tutoparal/Input</em> .
We will do most of the actions of this tutorial in this working directory.</p>
<p>Note that the pseudopotentials needed for running the tutorial (Si.psp8 and O.psp8)
are located in the directory <em>$ABI_PSPDIR/Pseudodojo_nc_sr_04_pw_standard_psp8</em>.</p>
<p>In the <a href="../gw1">first GW tutorial</a>, we have learned how to
generate the WFK file with the sequential version of the code.
Now we will perform a similar calculation taking advantage of the k-point parallelism
implemented in the ground-state part.</p>
<p>First of all, copy all input files <em>tmbt_*.abi</em> in the working directory <em>Work_mbt</em>:</p>
<div class="codehilite"><pre><span></span><code>cd Work_mbt
cp ../tmbt_*.abi .
</code></pre></div>

<p>Now open the input file <em>$ABI_TESTS/tutoparal/Input/tmbt_1.abi</em> in your
preferred editor, and look at its structure.</p>
<div class="text-center"><button type="button" id="uuid-ac79f647-9ce4-4c17-a8cf-3249f7f6f62b" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutoparal/Input/tmbt_1.abi
</button></div>
<div id="uuid-32b80ce6-55d8-40c8-ba35-87bee41658e6" class="my_dialog" title="tests/tutoparal/Input/tmbt_1.abi" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># Crystalline alpha-quartz</span>
ndtset <span class="m">2</span>
timopt -1

<span class="c1"># DATASET 1 : GS calculation </span>
tolvrs1     1d-8
nband1      <span class="m">28</span>     <span class="c1"># Adding 4 empty states to avoid problems in the SCF cycle.</span>

<span class="c1"># DATASET 2 : WFK generation</span>
iscf2      -2      <span class="c1"># NSCF</span>
getden2    -1      <span class="c1"># Read previous density</span>
tolwfr2    1d-12   <span class="c1"># Stopping criterion for the NSCF cycle.</span>
nband2      <span class="m">160</span>    <span class="c1"># Number of (occ and empty) bands computed in the NSCF cycle.</span>
nbdbuf2     <span class="m">10</span>     <span class="c1"># A large buffer helps to reduce the number of NSCF steps.</span>

<span class="c1">#################### COMMON PART #########################</span>

<span class="c1"># number of self-consistent field steps</span>
nstep        <span class="m">200</span>
diemac       <span class="m">4</span>.0

<span class="c1"># energy cutoff [Ha]:</span>
ecut         <span class="m">36</span>

<span class="c1">#Definition of the k-point grid</span>
occopt <span class="m">1</span>           <span class="c1"># Semiconductor</span>
kptopt <span class="m">1</span>           <span class="c1"># Option for the automatic generation of k points, taking</span>
                   <span class="c1"># into account the symmetry</span>

ngkpt   <span class="m">4</span> <span class="m">4</span> <span class="m">3</span>
nshiftk  <span class="m">1</span>
shiftk  <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0   <span class="c1"># The mesh contains the Gamma point </span>
                      <span class="c1"># so that we can evaluate the QP correction for this point.</span>
istwfk  *1

<span class="c1"># Definition of the atom types</span>
npsp   <span class="m">2</span>
znucl  <span class="m">14</span>  <span class="m">8</span>
ntypat <span class="m">2</span>

<span class="c1"># Definition of the atoms</span>
natom <span class="m">9</span>
typat <span class="m">3</span>*1  <span class="m">6</span>*2

<span class="c1"># Experimental parameters (Wyckoff pag 312)</span>
<span class="c1"># u(Si)= 0.465</span>
<span class="c1"># x= 0.415 ; y= 0.272 ; z= 0.120</span>

acell   <span class="m">2</span>*4.91304  <span class="m">5</span>.40463  Angstrom

xred   <span class="m">0</span>.465   <span class="m">0</span>.000   <span class="m">0</span>.000              <span class="c1">#Si</span>
       <span class="m">0</span>.000   <span class="m">0</span>.465   <span class="m">2</span>/3                <span class="c1">#Si</span>
      -0.465  -0.465   <span class="m">1</span>/3                <span class="c1">#Si</span>
       <span class="m">0</span>.415   <span class="m">0</span>.272   <span class="m">0</span>.120              <span class="c1">#O</span>
      -0.143  -0.415   <span class="m">0</span>.4533333333333333 <span class="c1">#O</span>
      -0.272   <span class="m">0</span>.143   <span class="m">0</span>.7866666666666666 <span class="c1">#O</span>
       <span class="m">0</span>.143  -0.272  -0.120              <span class="c1">#O</span>
       <span class="m">0</span>.272   <span class="m">0</span>.415   <span class="m">0</span>.5466666666666666 <span class="c1">#O</span>
      -0.415  -0.143   <span class="m">0</span>.2133333333333333 <span class="c1">#O</span>

rprim   <span class="m">5</span>.0000000000e-01 -8.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">5</span>.0000000000e-01  <span class="m">8</span>.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">0</span>.0000000000e+00  <span class="m">0</span>.0000000000e+00  <span class="m">1</span>.0000000000e+00

 pp_dirpath <span class="s2">&quot;</span><span class="nv">$ABI_PSPDIR</span><span class="s2">&quot;</span>
 pseudos <span class="s2">&quot;Pseudodojo_nc_sr_04_pw_standard_psp8/Si.psp8, Pseudodojo_nc_sr_04_pw_standard_psp8/O.psp8&quot;</span>

<span class="c1">##############################################################</span>
<span class="c1"># This section is used only for regression testing of ABINIT #</span>
<span class="c1">##############################################################</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi</span>
<span class="c1">##%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi, tmbt_4.abi</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 64</span>
<span class="c1">#%% nprocs_to_test = 64</span>
<span class="c1">#%% [NCPU_64]</span>
<span class="c1">#%% files_to_test = tmbt_1_MPI64.abo, tolnlines = 5, tolabs = 1.100e-03, tolrel = 3.000e-03</span>
<span class="c1">#%% [shell]</span>
<span class="c1">#%% post_commands = </span>
<span class="c1">#%%  ww_cp tmbt_1_MPI64o_DS2_WFK tmbt_2_MPI64i_WFK;</span>
<span class="c1">#%%  ww_cp tmbt_1_MPI64o_DS2_WFK tmbt_3_MPI64i_WFK;</span>
<span class="c1">#%%  ww_cp tmbt_1_MPI64o_DS2_WFK tmbt_4_MPI64i_WFK;</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = M. Giantomassi</span>
<span class="c1">#%% keywords =  GW</span>
<span class="c1">#%% description = GW calculation for crystalline alpha-quartz. Preparatory GS run.</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-32b80ce6-55d8-40c8-ba35-87bee41658e6", "#uuid-ac79f647-9ce4-4c17-a8cf-3249f7f6f62b") }); </script>

<p>The first dataset performs a rather standard SCF calculation to obtain the
ground-state density. The second dataset reads the density file and calculates
the Kohn-Sham band structure including many empty states:</p>
<div class="codehilite"><pre><span></span><code># <span class="nv">DATASET</span> <span class="mi">2</span> : <span class="nv">WFK</span> <span class="nv">generation</span>
<span class="nv">iscf2</span>      <span class="o">-</span><span class="mi">2</span>      # <span class="nv">NSCF</span>
<span class="nv">getden2</span>    <span class="o">-</span><span class="mi">1</span>      # <span class="nv">Read</span> <span class="nv">previous</span> <span class="nv">density</span>
<span class="nv">tolwfr2</span>    <span class="mi">1</span><span class="nv">d</span><span class="o">-</span><span class="mi">12</span>   # <span class="nv">Stopping</span> <span class="nv">criterion</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">NSCF</span> <span class="nv">cycle</span>.
<span class="nv">nband2</span>      <span class="mi">160</span>    # <span class="nv">Number</span> <span class="nv">of</span> <span class="ss">(</span><span class="nv">occ</span> <span class="nv">and</span> <span class="nv">empty</span><span class="ss">)</span> <span class="nv">bands</span> <span class="nv">computed</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">NSCF</span> <span class="nv">cycle</span>.
<span class="nv">nbdbuf2</span>     <span class="mi">10</span>     # <span class="nv">A</span> <span class="nv">large</span> <span class="nv">buffer</span> <span class="nv">helps</span> <span class="nv">to</span> <span class="nv">reduce</span> <span class="nv">the</span> <span class="nv">number</span> <span class="nv">of</span> <span class="nv">NSCF</span> <span class="nv">steps</span>.
</code></pre></div>

<p>We have already encountered these variables in the <a href="../gw1">first GW tutorial</a>
so their meaning should be familiar to you.
The only thing worth stressing is that this calculation solves the NSCF cycle
with the conjugate-gradient method (<a class="wikilink codevar-wikilink" href="../../variables/paral#paral_kgb">paral_kgb</a> == 0)</p>
<p>The NSCF cycle is executed in parallel using the standard parallelism over
k-points and spin in which the (<a class="wikilink codevar-wikilink" href="../../variables/basic#nkpt">nkpt</a> x <a class="wikilink codevar-wikilink" href="../../variables/basic#nsppol">nsppol</a>) blocks of bands are
distributed among the nodes. This test uses an unshifted 4x4x3 grid (48 k
points in the full Brillouin Zone, folding to 9 k-points in the irreducible
wedge) hence the theoretical maximum speedup is 9.</p>
<p>Now run ABINIT over nn CPU cores using</p>
<div class="codehilite"><pre><span></span><code>mpirun -n 9 abinit tmbt_1.abi &gt; tmbt_1.log 2&gt; err &amp;
</code></pre></div>

<p>but keep in mind that, to avoid idle processors, the number of CPUs should
divide 9. At the end of the run, the code will produce the file <em>tmbt_1o_DS2_WFK</em>
needed for the subsequent GW calculations.</p>
<p>With three nodes, the wall clock time is around 1.5 minutes.</p>
<div class="codehilite"><pre><span></span><code><span class="err">&gt;&gt;&gt;</span> <span class="nf">tail</span> <span class="no">tmbt_1.out</span>

<span class="err">-</span>
<span class="err">-</span> <span class="nf">Proc.</span>   <span class="mi">0</span> <span class="no">individual</span> <span class="no">time</span> <span class="p">(</span><span class="no">sec</span><span class="p">):</span> <span class="no">cpu</span><span class="err">=</span>        <span class="mi">209</span><span class="no">.0</span>  <span class="no">wall</span><span class="err">=</span>        <span class="mi">209</span><span class="no">.0</span>

<span class="err">================================================================================</span>

 <span class="nf">Calculation</span> <span class="no">completed.</span>
<span class="na">.Delivered</span>    <span class="mi">0</span> <span class="no">WARNINGs</span> <span class="no">and</span>   <span class="mi">5</span> <span class="no">COMMENTs</span> <span class="no">to</span> <span class="no">log</span> <span class="no">file.</span>
<span class="err">+</span><span class="nf">Overall</span> <span class="no">time</span> <span class="no">at</span> <span class="no">end</span> <span class="p">(</span><span class="no">sec</span><span class="p">)</span> <span class="p">:</span> <span class="no">cpu</span><span class="err">=</span>        <span class="mi">626</span><span class="no">.9</span>  <span class="no">wall</span><span class="err">=</span>        <span class="mi">626</span><span class="no">.9</span>
</code></pre></div>

<p>A reference output file is given in <em>$ABI_TESTS/tutoparal/Refs</em>, under the name <em>tmbt_1.abo</em>.</p>
<p>Note that 150 bands are not enough to obtain converged GW results, you might
increase the number of bands in proportion to your computing resources.</p>
<h2 id="2-computing-the-screening-in-parallel-using-the-adler-wiser-expression">2 Computing the screening in parallel using the Adler-Wiser expression<a class="headerlink" href="#2-computing-the-screening-in-parallel-using-the-adler-wiser-expression" title="Permanent link">&para;</a></h2>
<p>In this part of the tutorial, we will compute the RPA polarizability with the
Adler-Wiser approach. The basic equations are discussed in this
<a class="wikilink theory-wikilink" href="../../theory/mbt#5-the-rpa-polarizability-in-fourier-space">section</a> of the GW notes.</p>
<p>First copy the file <em>tmbt_2.abi</em> in the working directory, then create a
symbolic link pointing to the WFK file we have generated in the previous step:</p>
<div class="codehilite"><pre><span></span><code>&gt;&gt;&gt; ln -s tmbt_1o_DS2_WFK tmbt_2i_WFK
</code></pre></div>

<p>Now open the input file <em>$ABI_TESTS/tutoparal/Input/tmbt_2.abi</em> so that we can
discuss its structure.</p>
<div class="text-center"><button type="button" id="uuid-b44e6da3-33ec-4784-9aa3-f6f69dd548f1" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutoparal/Input/tmbt_2.abi
</button></div>
<div id="uuid-9538f9c8-9439-42ee-b8d2-cb2b451e6623" class="my_dialog" title="tests/tutoparal/Input/tmbt_2.abi" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># Crystalline alpha-quartz</span>
<span class="c1"># DATASET 1 : Screening calculation </span>
<span class="c1">#</span>
optdriver   <span class="m">3</span>   <span class="c1"># Screening run</span>
irdwfk      <span class="m">1</span>   <span class="c1"># To read the WFK file</span>
symchi      <span class="m">1</span>   <span class="c1"># Use symmetries to speedup the BZ integration</span>
gwpara      <span class="m">2</span>   <span class="c1"># Parallelization over bands</span>
awtr        <span class="m">1</span>   <span class="c1"># Take advantage of time-reversal. Mandatory when gwpara=2 is used.</span>
ecutwfn     <span class="m">36</span>  <span class="c1"># Cutoff for the wavefunctions.</span>
ecuteps     <span class="m">8</span>   <span class="c1"># Cutoff for the polarizability.</span>
nband       <span class="m">50</span>  <span class="c1"># Number of bands in the RPA expression (24 occupied bands)</span>
inclvkb     <span class="m">2</span>   <span class="c1"># Correct treatment of the optical limit.</span>

timopt -1

<span class="c1">#################### COMMON PART #########################</span>

<span class="c1"># number of self-consistent field steps</span>
nstep        <span class="m">200</span>

<span class="c1"># energy cutoff [Ha]:</span>
ecut         <span class="m">36</span>

<span class="c1">#Definition of the k-point grid</span>
occopt <span class="m">1</span>           <span class="c1"># Semiconductor</span>
kptopt <span class="m">1</span>           <span class="c1"># Option for the automatic generation of k points, taking</span>
                   <span class="c1"># into account the symmetry</span>

ngkpt   <span class="m">4</span> <span class="m">4</span> <span class="m">3</span>
nshiftk  <span class="m">1</span>
shiftk  <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
istwfk  *1

<span class="c1"># Definition of the atom types</span>
npsp   <span class="m">2</span>
znucl  <span class="m">14</span>  <span class="m">8</span>
ntypat <span class="m">2</span>

<span class="c1"># Definition of the atoms</span>
natom <span class="m">9</span>
typat <span class="m">3</span>*1  <span class="m">6</span>*2

<span class="c1"># Experimental parameters (Wyckoff pag 312)</span>
<span class="c1"># u(Si)= 0.465</span>
<span class="c1"># x= 0.415 ; y= 0.272 ; z= 0.120</span>

acell   <span class="m">2</span>*4.91304  <span class="m">5</span>.40463  Angstrom

xred   <span class="m">0</span>.465   <span class="m">0</span>.000   <span class="m">0</span>.000              <span class="c1">#Si</span>
       <span class="m">0</span>.000   <span class="m">0</span>.465   <span class="m">2</span>/3                <span class="c1">#Si</span>
      -0.465  -0.465   <span class="m">1</span>/3                <span class="c1">#Si</span>
       <span class="m">0</span>.415   <span class="m">0</span>.272   <span class="m">0</span>.120              <span class="c1">#O</span>
      -0.143  -0.415   <span class="m">0</span>.4533333333333333 <span class="c1">#O</span>
      -0.272   <span class="m">0</span>.143   <span class="m">0</span>.7866666666666666 <span class="c1">#O</span>
       <span class="m">0</span>.143  -0.272  -0.120              <span class="c1">#O</span>
       <span class="m">0</span>.272   <span class="m">0</span>.415   <span class="m">0</span>.5466666666666666 <span class="c1">#O</span>
      -0.415  -0.143   <span class="m">0</span>.2133333333333333 <span class="c1">#O</span>

rprim   <span class="m">5</span>.0000000000e-01 -8.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">5</span>.0000000000e-01  <span class="m">8</span>.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">0</span>.0000000000e+00  <span class="m">0</span>.0000000000e+00  <span class="m">1</span>.0000000000e+00

 pp_dirpath <span class="s2">&quot;</span><span class="nv">$ABI_PSPDIR</span><span class="s2">&quot;</span>
 pseudos <span class="s2">&quot;Pseudodojo_nc_sr_04_pw_standard_psp8/Si.psp8, Pseudodojo_nc_sr_04_pw_standard_psp8/O.psp8&quot;</span>

<span class="c1">##############################################################</span>
<span class="c1"># This section is used only for regression testing of ABINIT #</span>
<span class="c1">##############################################################</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi</span>
<span class="c1">##%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi, tmbt_4.abi</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 64</span>
<span class="c1">#%% nprocs_to_test = 64</span>
<span class="c1">#%% [NCPU_64]</span>
<span class="c1">#%% files_to_test = tmbt_2_MPI64.abo, tolnlines = 10, tolabs = 1.100e-03, tolrel = 3.000e-03</span>
<span class="c1">#%% [shell]</span>
<span class="c1">#%% post_commands = </span>
<span class="c1">#%%  ww_cp tmbt_2_MPI64o_SCR tmbt_4_MPI64i_SCR;</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = M. Giantomassi</span>
<span class="c1">#%% keywords =  GW</span>
<span class="c1">#%% description = GW calculation for crystalline alpha-quartz. Screening calculation</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-9538f9c8-9439-42ee-b8d2-cb2b451e6623", "#uuid-b44e6da3-33ec-4784-9aa3-f6f69dd548f1") }); </script>

<p>The set of parameters controlling the screening computation is summarized below:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">optdriver</span>   <span class="mi">3</span>   # <span class="nv">Screening</span> <span class="nv">run</span>
<span class="nv">irdwfk</span>      <span class="mi">1</span>   # <span class="nv">Read</span> <span class="nv">input</span> <span class="nv">WFK</span> <span class="nv">file</span>
<span class="nv">symchi</span>      <span class="mi">1</span>   # <span class="nv">Use</span> <span class="nv">symmetries</span> <span class="nv">to</span> <span class="nv">speedup</span> <span class="nv">the</span> <span class="nv">BZ</span> <span class="nv">integration</span>
<span class="nv">awtr</span>        <span class="mi">1</span>   # <span class="nv">Take</span> <span class="nv">advantage</span> <span class="nv">of</span> <span class="nv">time</span><span class="o">-</span><span class="nv">reversal</span>. <span class="nv">Mandatory</span> <span class="nv">when</span> <span class="nv">gwpara</span><span class="o">=</span><span class="mi">2</span> <span class="nv">is</span> <span class="nv">used</span>.
<span class="nv">gwpara</span>      <span class="mi">2</span>   # <span class="nv">Parallelization</span> <span class="nv">over</span> <span class="nv">bands</span>
<span class="nv">ecutwfn</span>     <span class="mi">24</span>  # <span class="nv">Cutoff</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">wavefunctions</span>.
<span class="nv">ecuteps</span>     <span class="mi">8</span>   # <span class="nv">Cutoff</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">polarizability</span>.
<span class="nv">nband</span>       <span class="mi">50</span>  # <span class="nv">Number</span> <span class="nv">of</span> <span class="nv">bands</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">RPA</span> <span class="nv">expression</span> <span class="ss">(</span><span class="mi">24</span> <span class="nv">occupied</span> <span class="nv">bands</span><span class="ss">)</span>
<span class="nv">inclvkb</span>     <span class="mi">2</span>   # <span class="nv">Correct</span> <span class="nv">treatment</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">optical</span> <span class="nv">limit</span>.
</code></pre></div>

<p>Most of the variables have been already discussed in the
<a href="../gw1">first GW tutorial</a>. The only variables that
deserve some additional explanation are <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> and <a class="wikilink codevar-wikilink" href="../../variables/gw#awtr">awtr</a>.</p>
<p><a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> selects the parallel algorithm used to compute the screening. Two
different approaches are implemented:</p>
<ul>
<li><strong>gwpara</strong> =1 -&gt; Trivial parallelization over the k-points in the full Brillouin</li>
<li><strong>gwpara</strong> =2 -&gt; Parallelization over bands with memory distribution</li>
</ul>
<p>Each method presents advantages and drawbacks that are discussed in the
documentation of the variable. In this tutorial, we will be focusing on
<strong>gwpara</strong> =2 since this is the algorithm with the best MPI-scalability and,
mostly important, it is the only one that allows for a significant reduction
of the memory requirement.</p>
<p>The option <a class="wikilink codevar-wikilink" href="../../variables/gw#awtr">awtr</a> = 1 specifies that the system presents time reversal
symmetry so that it is possible to halve the number of transitions that have
to be calculated explicitly (only resonant transitions are needed). Note that
<a class="wikilink codevar-wikilink" href="../../variables/gw#awtr">awtr</a> = 1 is MANDATORY when <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> = 2 is used.</p>
<p>Before running the calculation in parallel, it is worth discussing some
important technical details of the implementation. For our purposes, it
suffices to say that, when <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> = 2 is used in the screening part, the
code distributes the wavefunctions such that each processing unit owns the
FULL set of occupied bands while the empty states are distributed among the
nodes. The parallel computation of the inverse dielectric matrix is done in
three different steps that can be schematically described as follows:</p>
<ol>
<li>Each node computes the partial contribution to the RPA polarizability:</li>
</ol>
<div>
<div class="MathJax_Preview"> \sum_{c,\nu} = \sum^\text{occ}_\nu \sum^\text{mystop}_\text{c=mystart} </div>
<script type="math/tex; mode=display"> \sum_{c,\nu} = \sum^\text{occ}_\nu \sum^\text{mystop}_\text{c=mystart} </script>
</div>
<ol start="2">
<li>
<p>The partial results are collected on each node.</p>
</li>
<li>
<p>The master node performs the matrix inversion to obtain the inverse dielectric matrix and writes the final result on file.</p>
</li>
</ol>
<p>Both the first and second step of the algorithm are expected to scale well
with the number of processors. Step 3, on the contrary, is performed in
sequential thus it will have a detrimental effect on the overall scaling,
especially in the case of large screening matrices (large <a class="wikilink codevar-wikilink" href="../../variables/internal#npweps">%npweps</a> or large
number of frequency points ).</p>
<p>Note that the maximum number of CPUs that can be used is dictated by the
number of empty states used to compute the polarizability. Most importantly, a
balanced distribution of the computing time is obtained when the number of
processors divides the number of conduction states.</p>
<p>The main limitation of the present implementation is represented by the
storage of the polarizability. This matrix, indeed, is not distributed hence
each node must have enough memory to store in memory a table whose size is
given by ( <strong>npweps</strong><sup>2</sup> x <strong>nomega</strong> x 16 bytes) where <strong>nomega</strong> is the total
number of frequencies computed.</p>
<p>Tests performed at the Barcelona Supercomputing Center (see figures below)
have revealed that the first and the second part of the MPI algorithm have a
very good scaling. The routines cchi0 and cchi0q0 where the RPA expression is
computed (step 1 and 2) scales almost linearly up to 512 processors. The
degradation of the total speedup observed for large number of processors is
mainly due to the portions of the computation that are not parallelized,
namely the reading of the WFK file and the matrix inversion (qloop).</p>
<p><img alt="" src="../paral_mbt_assets/screening_speedup.png" /></p>
<p><img alt="" src="../paral_mbt_assets/screening_rel_times.png" /></p>
<p>At this point, the most important technical details of the implementation have
been covered, and we can finally run ABINIT over nn CPU cores using</p>
<div class="codehilite"><pre><span></span><code>(mpirun ...) abinit tmbt_2.abi &gt; tmbt_2.log 2&gt; err &amp;
</code></pre></div>

<p>Run the input file <em>tmb_2.abi</em> using different number of processors and keep
track of the time for each processor number so that we can test the
scalability of the implementation. The performance analysis reported in the
figures above was obtained with PAW using ZnO as tests case, but you should
observe a similar behavior also in SiO<sub>2</sub>.</p>
<p>Now let us have a look at the output results. Since this tutorial mainly
focuses on how to run efficient MPI computations, we will not perform any
converge study for SiO<sub>2</sub>. Most of the parameters used in the input files are
already close to converge, only the k-point sampling and the number of empty
states should be increased. You might modify the input files to perform the
standard converge tests following the procedure described in the <a href="../gw1">first GW tutorial</a>.</p>
<p>In the main output file, there is a section reporting how the bands are
distributed among the nodes. For a sequential calculation, we have</p>
<div class="codehilite"><pre><span></span><code> <span class="nv">screening</span> : <span class="nv">taking</span> <span class="nv">advantage</span> <span class="nv">of</span> <span class="nv">time</span><span class="o">-</span><span class="nv">reversal</span> <span class="nv">symmetry</span>
 <span class="nv">Maximum</span> <span class="nv">band</span> <span class="nv">index</span> <span class="k">for</span> <span class="nv">partially</span> <span class="nv">occupied</span> <span class="nv">states</span> <span class="nv">nbvw</span> <span class="o">=</span>    <span class="mi">24</span>
 <span class="nv">Remaining</span> <span class="nv">bands</span> <span class="nv">to</span> <span class="nv">be</span> <span class="nv">divided</span> <span class="nv">among</span> <span class="nv">processors</span>   <span class="nv">nbcw</span> <span class="o">=</span>    <span class="mi">26</span>
 <span class="nv">Number</span> <span class="nv">of</span> <span class="nv">bands</span> <span class="nv">treated</span> <span class="nv">by</span> <span class="nv">each</span> <span class="nv">node</span> <span class="o">~</span>   <span class="mi">26</span>
</code></pre></div>

<p>The value reported in the last line will decrease when the computation is done with more processors.</p>
<p>The memory allocated for the wavefunctions scales with the number of
processors. You can use the grep utility to extract this information from the
log file. For a calculation in sequential, we have:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="ss">&quot;Memory needed&quot;</span><span class="w"> </span><span class="n">tmbt_2</span><span class="p">.</span><span class="nf">log</span><span class="w"></span>

<span class="w">  </span><span class="n">Memory</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">storing</span><span class="w"> </span><span class="n">ug</span><span class="o">=</span><span class="w">         </span><span class="mf">29.5</span><span class="w"> </span><span class="o">[</span><span class="n">Mb</span><span class="o">]</span><span class="w"></span>
<span class="w">  </span><span class="n">Memory</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">storing</span><span class="w"> </span><span class="n">ur</span><span class="o">=</span><span class="w">        </span><span class="mf">180.2</span><span class="w"> </span><span class="o">[</span><span class="n">Mb</span><span class="o">]</span><span class="w"></span>
</code></pre></div>

<p><em>ug</em> denotes the internal buffer used to store the Fourier components of the
orbitals whose size scales linearly with <a class="wikilink codevar-wikilink" href="../../variables/internal#npwwfn">%npwwfn</a>. <em>ur</em> is the array storing
the orbitals on the real space FFT mesh. Keep in mind that the size of <em>ur</em>
scales linearly with the total number of points in the FFT box, number that is
usually much larger than the number of planewaves (<a class="wikilink codevar-wikilink" href="../../variables/internal#npwwfn">%npwwfn</a>). The number of
FFT divisions used in the GW code can be extracted from the main output file using</p>
<div class="codehilite"><pre><span></span><code>&gt;&gt;&gt; grep setmesh tmbt_2.out  -A 1
 setmesh: FFT mesh size selected  =  27x 27x 36
          total number of points  =    26244
</code></pre></div>

<p>As discussed in this
<a class="wikilink theory-wikilink" href="../../theory/mbt#6-notes-on-the-calculation-of-the-oscillator-matrix-elements">section</a> of the GW notes,
the Fast Fourier Transform represents one of the most CPU
intensive part of the execution. For this reason the code provides the input
variable <a class="wikilink codevar-wikilink" href="../../variables/gw#fftgw">fftgw</a> that can be used to decrease the number of FFT points for
better efficiency. The second digit of the input variable <a class="wikilink codevar-wikilink" href="../../variables/gw#gwmem">gwmem</a>, instead,
governs the storage of the real space orbitals and can used to avoid the
storage of the costly array <em>ur</em> at the price of an increase in computational time.</p>
<h4 id="2d-manual-parallelization-over-q-points"><strong>2.d Manual parallelization over q-points.</strong><a class="headerlink" href="#2d-manual-parallelization-over-q-points" title="Permanent link">&para;</a></h4>
<p>The computational effort required by the screening computation scales linearly
with the number of q-points.
As explained in this
<a class="wikilink theory-wikilink" href="../../theory/mbt#5-the-rpa-polarizability-in-fourier-space">section</a>
of the GW notes, the code exploits the symmetries of the screening function so
that only the irreducible Brillouin zone (IBZ) has to be calculated
explicitly. On the other hand, a large number of q-points might be needed to
achieve converged results. Typical examples are GW calculations in metals or
optical properties within the Bethe-Salpeter formalism.</p>
<p>If enough processing units are available, the linear factor due to the q-point
sampling can be trivially absorbed by splitting the calculation of the
q-points into several independent runs using the variables <a class="wikilink codevar-wikilink" href="../../variables/gw#nqptdm">nqptdm</a> and
<a class="wikilink codevar-wikilink" href="../../variables/gw#qptdm">qptdm</a>. The results can then be gathered in a unique binary file by means
of the <strong>mrgscr</strong> utility (see also the automatic tests <a class="wikilink abifile-wikilink" data-content="
Test on splitting screening calculation using nqptdm and qptdm
Si in 2-atom diamond unit cell (nkpt 2; ecut 6)
In dataset 1, ABINIT finds the ground state (tolwfr 1.0d-16)
the eigenvectors necessary for the GW calculation being stored in _WFK.
In datasets 2-4, ABINIT computes the eps^-1 matrix for 1 qpt , 2 qpts, 3qpts respectively" data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/v3/Input/t87.abi" target="_blank">v3[87]</a>, <a class="wikilink abifile-wikilink" data-content="
Test of mrgscr utility
Merging the screening files already generated in the test 87 in a single file." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/v3/Input/t88.abi" target="_blank">v3[88]</a> and <a class="wikilink abifile-wikilink" data-content="
Test of mrgscr utility
mrgscr is used here to check the status of screening file (from test 88),
what is there and what is needed." data-placement="auto right" data-toggle="popover" data-trigger="hover focus" href="../../tests/v3/Input/t89.abi" target="_blank">v3[89]</a>).</p>
<h2 id="3-computing-the-screening-in-parallel-using-the-hilbert-transform-method">3 Computing the screening in parallel using the Hilbert transform method<a class="headerlink" href="#3-computing-the-screening-in-parallel-using-the-hilbert-transform-method" title="Permanent link">&para;</a></h2>
<p>As discussed in the <a class="wikilink theory-wikilink" href="../../theory/mbt#RPA_Fourier_space">GW_notes</a>
the algorithm based on the Adler-Wiser expression is not optimal when many
frequencies are wanted. In this paragraph, we therefore discuss how to use the
Hilbert transform method to calculate the RPA polarizability on a dense
frequency mesh. The equations implemented in the code are documented in
<a class="wikilink theory-wikilink" href="../../theory/mbt#hilbert_transform">in this section</a>.</p>
<p>As usual, we have to copy the file <em>tmbt_3.abi</em> in the working directory,
and then create a symbolic link pointing to the WFK file.</p>
<div class="codehilite"><pre><span></span><code>&gt;&gt;&gt; ln -s tmbt_1o_DS2_WFK tmbt_3i_WFK
</code></pre></div>

<p>The input file is <em>$ABI_TESTS/tutoparal/Input/tmbt_3.abi</em>.
Open it so that we can have a look at its structure.</p>
<div class="text-center"><button type="button" id="uuid-e1406271-8c2c-4b53-a09e-9c265e1182d1" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutoparal/Input/tmbt_3.abi
</button></div>
<div id="uuid-480acb65-56e3-4b6c-8e8b-2e8b4eb9518c" class="my_dialog" title="tests/tutoparal/Input/tmbt_3.abi" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># Crystalline alpha-quartz</span>
<span class="c1"># DATASET 1 : Screening calculation </span>
<span class="c1">#</span>
optdriver   <span class="m">3</span>    <span class="c1"># Screening run</span>
irdwfk      <span class="m">1</span>    <span class="c1"># To read the WFK file.</span>
symchi      <span class="m">1</span>    <span class="c1"># Use symmetries to speedup the BZ integration</span>
ecutwfn     <span class="m">36</span>   <span class="c1"># Cutoff for the wavefunctions.</span>
ecuteps     <span class="m">8</span>    <span class="c1"># Cutoff for the polarizability.</span>
nband       <span class="m">50</span>   <span class="c1"># Number of bands in the spectral function (24 occupied bands).</span>
inclvkb     <span class="m">2</span>    <span class="c1"># Correct treatment of the optical limit.</span>

gwcalctyp   <span class="m">2</span>    <span class="c1"># Contour-deformation technique.</span>
spmeth      <span class="m">1</span>    <span class="c1"># Enable the spectral method.</span>
nomegasf  <span class="m">100</span>    <span class="c1"># Number of points for the spectral function. </span>
gwpara      <span class="m">2</span>    <span class="c1"># Parallelization over bands</span>
awtr        <span class="m">1</span>    <span class="c1"># Take advantage of time-reversal. Mandatory when gwpara=2 is used.</span>
freqremax  <span class="m">40</span> eV <span class="c1"># Frequency mesh for the polarizability</span>
nfreqre    <span class="m">20</span>
nfreqim     <span class="m">5</span>

timopt -1

<span class="c1">#################### COMMON PART #########################</span>

<span class="c1"># number of self-consistent field steps</span>
nstep        <span class="m">200</span>

<span class="c1"># energy cutoff [Ha]:</span>
ecut         <span class="m">36</span>

<span class="c1">#Definition of the k-point grid</span>
occopt <span class="m">1</span>           <span class="c1"># Semiconductor</span>
kptopt <span class="m">1</span>           <span class="c1"># Option for the automatic generation of k points, taking</span>
                   <span class="c1"># into account the symmetry</span>

ngkpt   <span class="m">4</span> <span class="m">4</span> <span class="m">3</span>
nshiftk  <span class="m">1</span>
shiftk  <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
istwfk  *1

<span class="c1"># Definition of the atom types</span>
npsp   <span class="m">2</span>
znucl  <span class="m">14</span>  <span class="m">8</span>
ntypat <span class="m">2</span>

<span class="c1"># Definition of the atoms</span>
natom <span class="m">9</span>
typat <span class="m">3</span>*1  <span class="m">6</span>*2

<span class="c1"># Experimental parameters (Wyckoff pag 312)</span>
<span class="c1"># u(Si)= 0.465</span>
<span class="c1"># x= 0.415 ; y= 0.272 ; z= 0.120</span>

acell   <span class="m">2</span>*4.91304  <span class="m">5</span>.40463  Angstrom

xred   <span class="m">0</span>.465   <span class="m">0</span>.000   <span class="m">0</span>.000              <span class="c1">#Si</span>
       <span class="m">0</span>.000   <span class="m">0</span>.465   <span class="m">2</span>/3                <span class="c1">#Si</span>
      -0.465  -0.465   <span class="m">1</span>/3                <span class="c1">#Si</span>
       <span class="m">0</span>.415   <span class="m">0</span>.272   <span class="m">0</span>.120              <span class="c1">#O</span>
      -0.143  -0.415   <span class="m">0</span>.4533333333333333 <span class="c1">#O</span>
      -0.272   <span class="m">0</span>.143   <span class="m">0</span>.7866666666666666 <span class="c1">#O</span>
       <span class="m">0</span>.143  -0.272  -0.120              <span class="c1">#O</span>
       <span class="m">0</span>.272   <span class="m">0</span>.415   <span class="m">0</span>.5466666666666666 <span class="c1">#O</span>
      -0.415  -0.143   <span class="m">0</span>.2133333333333333 <span class="c1">#O</span>

rprim   <span class="m">5</span>.0000000000e-01 -8.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">5</span>.0000000000e-01  <span class="m">8</span>.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">0</span>.0000000000e+00  <span class="m">0</span>.0000000000e+00  <span class="m">1</span>.0000000000e+00

 pp_dirpath <span class="s2">&quot;</span><span class="nv">$ABI_PSPDIR</span><span class="s2">&quot;</span>
 pseudos <span class="s2">&quot;Pseudodojo_nc_sr_04_pw_standard_psp8/Si.psp8, Pseudodojo_nc_sr_04_pw_standard_psp8/O.psp8&quot;</span>

<span class="c1">##############################################################</span>
<span class="c1"># This section is used only for regression testing of ABINIT #</span>
<span class="c1">##############################################################</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi</span>
<span class="c1">##%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi, tmbt_4.abi</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 64</span>
<span class="c1">#%% nprocs_to_test = 64</span>
<span class="c1">#%% [NCPU_64]</span>
<span class="c1">#%% files_to_test = tmbt_3_MPI64.abo, tolnlines = 10, tolabs = 1.100e-03, tolrel = 3.000e-03</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = M. Giantomassi</span>
<span class="c1">#%% keywords =  GW</span>
<span class="c1">#%% description = GW calculation for crystalline alpha-quartz. </span>
<span class="c1">#%%   Screening calculation with Hilbert transform</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-480acb65-56e3-4b6c-8e8b-2e8b4eb9518c", "#uuid-e1406271-8c2c-4b53-a09e-9c265e1182d1") }); </script>

<p>A snapshot of the most important parameters governing the algorithm is reported below.</p>
<div class="codehilite"><pre><span></span><code><span class="nv">gwcalctyp</span>   <span class="mi">2</span>    # <span class="nv">Contour</span><span class="o">-</span><span class="nv">deformation</span> <span class="nv">technique</span>.
<span class="nv">spmeth</span>      <span class="mi">1</span>    # <span class="nv">Enable</span> <span class="nv">the</span> <span class="nv">spectral</span> <span class="nv">method</span>.
<span class="nv">nomegasf</span>  <span class="mi">100</span>    # <span class="nv">Number</span> <span class="nv">of</span> <span class="nv">points</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">spectral</span> <span class="nv">function</span>.
<span class="nv">gwpara</span>      <span class="mi">2</span>    # <span class="nv">Parallelization</span> <span class="nv">over</span> <span class="nv">bands</span>
<span class="nv">awtr</span>        <span class="mi">1</span>    # <span class="nv">Take</span> <span class="nv">advantage</span> <span class="nv">of</span> <span class="nv">time</span><span class="o">-</span><span class="nv">reversal</span>. <span class="nv">Mandatory</span> <span class="nv">when</span> <span class="nv">gwpara</span><span class="o">=</span><span class="mi">2</span> <span class="nv">is</span> <span class="nv">used</span>.
<span class="nv">freqremax</span>  <span class="mi">40</span> <span class="nv">eV</span> # <span class="nv">Frequency</span> <span class="nv">mesh</span> <span class="k">for</span> <span class="nv">the</span> <span class="nv">polarizability</span>
<span class="nv">nfreqre</span>    <span class="mi">20</span>
<span class="nv">nfreqim</span>     <span class="mi">5</span>
</code></pre></div>

<p>The input file is similar to the one we used for the Adler-Wiser calculation.
The input variable <a class="wikilink codevar-wikilink" href="../../variables/gw#spmeth">spmeth</a> enables the spectral method. <a class="wikilink codevar-wikilink" href="../../variables/gw#nomegasf">nomegasf</a>
defines the number of  points in the linear mesh used for the spectral
function i.e. the number of  in the
<a class="wikilink theory-wikilink" href="../../theory/mbt#hilbert_transform">equation</a> for the spectral function.</p>
<p>As discussed in the [[theory:mbt#hilbert_transform|GW notes] for the spectral function.
Hilbert transform method is much more memory demanding that the Adler-Wiser
approach, mainly because of the large value of <a class="wikilink codevar-wikilink" href="../../variables/gw#nomegasf">nomegasf</a> that is usually
needed to converge the results. Fortunately, the particular distribution of
the data employed in <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> = 2 turns out to be well suited for the
calculation of the spectral function since each processor has to store and
treat only a subset of the entire range of transition energies. The algorithm
therefore presents good MPI-scalability since the number of  frequencies
that have to be stored and considered in the Hilbert transform decreases with
the number of processors.</p>
<p>Now run ABINIT over nn CPU cores using</p>
<div class="codehilite"><pre><span></span><code>(mpirun ...) abinit tmbt_3.abi &gt; tmbt_3.log 2&gt; err
</code></pre></div>

<p>and test the scaling by varying the number of processors. Keep in mind that,
also in this case, the distribution of the computing work is well balanced
when the number of CPUs divides the number of conduction states.</p>
<p>The memory needed to store the spectral function is reported in the log file:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">grep</span><span class="w"> </span><span class="ss">&quot;sf_chi0q0&quot;</span><span class="w"> </span><span class="n">tmbt_3</span><span class="p">.</span><span class="nf">log</span><span class="w"></span>
<span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="nl">sf_chi0q0</span><span class="p">:</span><span class="w">           </span><span class="mf">1.0036</span><span class="w"> </span><span class="o">[</span><span class="n">Gb</span><span class="o">]</span><span class="w"></span>
</code></pre></div>

<p>Note how the size of this array decreases when more processors are used.</p>
<p>The figure below shows the electron energy loss function (EELF) of SiO<sub>2</sub>
calculated using the Adler-Wiser and the Hilbert transform method. You might
try to reproduce these results (the EELF is reported in the file <em>tmbt_3o_EELF</em>,
a much denser k-sampling is required to achieve convergence).</p>
<p><img alt="" src="../paral_mbt_assets/comp-AW-spect.png" /></p>
<h2 id="4-computing-the-one-shot-gw-corrections-in-parallel">4 Computing the one-shot GW corrections in parallel<a class="headerlink" href="#4-computing-the-one-shot-gw-corrections-in-parallel" title="Permanent link">&para;</a></h2>
<p>In this last paragraph, we discuss how to calculate G<sub>0</sub>W<sub>0</sub> corrections in
parallel with <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> = 2. The basic equations used to compute the self-energy matrix elements are discussed in
<a class="wikilink theory-wikilink" href="../../theory/mbt#evaluation_gw_sigma">this part</a> of the GW notes.</p>
<p>Before running the calculation, copy the file <em>tmbt_4.abi</em> in the working
directory. Then create two symbolic links for the SCR and the WFK file:</p>
<div class="codehilite"><pre><span></span><code>ln -s tmbt_1o_DS2_WFK tmbt_4i_WFK
ln -s tmbt_2o_SCR     tmbt_4i_SCR
</code></pre></div>

<p>Now open the input file <em>$ABI_TESTS/tutoparal/Input/tmbt_4.abi</em>.</p>
<div class="text-center"><button type="button" id="uuid-d3ac44bf-5a8e-4fd9-9619-da01c4acf5bc" class="btn btn-default btn-labeled">
  <span class="btn-label"><i class="fa fa-window-restore" aria-hidden="true"></i></span>View tests/tutoparal/Input/tmbt_4.abi
</button></div>
<div id="uuid-4b724d5b-cc6b-444a-8e59-e41c184e66e0" class="my_dialog" title="tests/tutoparal/Input/tmbt_4.abi" hidden><div><div class="codehilite small-text"><pre><span></span><span class="c1"># Crystalline alpha-quartz</span>
<span class="c1"># DATASET 1 : Sigma calculation</span>
<span class="c1">#</span>
optdriver   <span class="m">4</span>            <span class="c1"># Sigma run.</span>
irdwfk      <span class="m">1</span>  
irdscr      <span class="m">1</span>
gwcalctyp   <span class="m">0</span> ppmodel <span class="m">1</span>  <span class="c1"># G0W0 calculation with the plasmon-pole approximation.</span>
<span class="c1">#gwcalctyp  2            # Uncomment this line to use the contour-deformation technique but remember to change the SCR file!</span>
gwpara      <span class="m">2</span>            <span class="c1"># Parallelization over bands.</span>
symsigma    <span class="m">1</span>            <span class="c1"># To enable the symmetrization of the self-energy matrix elements.</span>
ecutwfn    <span class="m">36</span>            <span class="c1"># Cutoff for the wavefunctions.</span>
ecuteps     <span class="m">8</span>            <span class="c1"># Cutoff in the correlation part.</span>
ecutsigx   <span class="m">20</span>            <span class="c1"># Cutoff in the exchange part.</span>
nband       <span class="m">50</span>           <span class="c1"># Number of bands for the correlation part.</span>
gw_icutcoul   <span class="m">3</span>            <span class="c1"># old deprecated value of icutcoul, only used for legacy</span>

timopt -1


<span class="c1"># List of k-points for GW corrections.</span>
nkptgw     <span class="m">5</span>
kptgw  
  <span class="m">0</span>.00000000E+00  <span class="m">0</span>.00000000E+00  <span class="m">0</span>.00000000E+00
  <span class="m">2</span>.50000000E-01  <span class="m">0</span>.00000000E+00  <span class="m">0</span>.00000000E+00
  <span class="m">5</span>.00000000E-01  <span class="m">0</span>.00000000E+00  <span class="m">0</span>.00000000E+00
  <span class="m">2</span>.50000000E-01  <span class="m">2</span>.50000000E-01  <span class="m">0</span>.00000000E+00
  <span class="m">0</span>.00000000E+00  <span class="m">0</span>.00000000E+00  <span class="m">3</span>.33333333E-01
  <span class="m">2</span>.50000000E-01  <span class="m">0</span>.00000000E+00  <span class="m">3</span>.33333333E-01
  <span class="m">5</span>.00000000E-01  <span class="m">0</span>.00000000E+00  <span class="m">3</span>.33333333E-01
 -2.50000000E-01  <span class="m">0</span>.00000000E+00  <span class="m">3</span>.33333333E-01
  <span class="m">2</span>.50000000E-01  <span class="m">2</span>.50000000E-01  <span class="m">3</span>.33333333E-01

bdgw    
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>
  <span class="m">24</span>  <span class="m">25</span>

<span class="c1">#################### COMMON PART #########################</span>

<span class="c1"># number of self-consistent field steps</span>
nstep        <span class="m">200</span>

<span class="c1"># energy cutoff [Ha]:</span>
ecut         <span class="m">36</span>

<span class="c1">#Definition of the k-point grid</span>
occopt <span class="m">1</span>           <span class="c1"># Semiconductor</span>
kptopt <span class="m">1</span>           <span class="c1"># Option for the automatic generation of k points, taking</span>
                   <span class="c1"># into account the symmetry</span>

ngkpt   <span class="m">4</span> <span class="m">4</span> <span class="m">3</span>
nshiftk  <span class="m">1</span>
shiftk  <span class="m">0</span>.0 <span class="m">0</span>.0 <span class="m">0</span>.0
istwfk  *1

<span class="c1"># Definition of the atom types</span>
npsp   <span class="m">2</span>
znucl  <span class="m">14</span>  <span class="m">8</span>
ntypat <span class="m">2</span>

<span class="c1"># Definition of the atoms</span>
natom <span class="m">9</span>
typat <span class="m">3</span>*1  <span class="m">6</span>*2

<span class="c1"># Experimental parameters (Wyckoff pag 312)</span>
<span class="c1"># u(Si)= 0.465</span>
<span class="c1"># x= 0.415 ; y= 0.272 ; z= 0.120</span>

acell   <span class="m">2</span>*4.91304  <span class="m">5</span>.40463  Angstrom

xred   <span class="m">0</span>.465   <span class="m">0</span>.000   <span class="m">0</span>.000              <span class="c1">#Si</span>
       <span class="m">0</span>.000   <span class="m">0</span>.465   <span class="m">2</span>/3                <span class="c1">#Si</span>
      -0.465  -0.465   <span class="m">1</span>/3                <span class="c1">#Si</span>
       <span class="m">0</span>.415   <span class="m">0</span>.272   <span class="m">0</span>.120              <span class="c1">#O</span>
      -0.143  -0.415   <span class="m">0</span>.4533333333333333 <span class="c1">#O</span>
      -0.272   <span class="m">0</span>.143   <span class="m">0</span>.7866666666666666 <span class="c1">#O</span>
       <span class="m">0</span>.143  -0.272  -0.120              <span class="c1">#O</span>
       <span class="m">0</span>.272   <span class="m">0</span>.415   <span class="m">0</span>.5466666666666666 <span class="c1">#O</span>
      -0.415  -0.143   <span class="m">0</span>.2133333333333333 <span class="c1">#O</span>

rprim   <span class="m">5</span>.0000000000e-01 -8.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">5</span>.0000000000e-01  <span class="m">8</span>.6602540378e-01  <span class="m">0</span>.0000000000e+00
        <span class="m">0</span>.0000000000e+00  <span class="m">0</span>.0000000000e+00  <span class="m">1</span>.0000000000e+00

 pp_dirpath <span class="s2">&quot;</span><span class="nv">$ABI_PSPDIR</span><span class="s2">&quot;</span>
 pseudos <span class="s2">&quot;Pseudodojo_nc_sr_04_pw_standard_psp8/Si.psp8, Pseudodojo_nc_sr_04_pw_standard_psp8/O.psp8&quot;</span>

<span class="c1">##############################################################</span>
<span class="c1"># This section is used only for regression testing of ABINIT #</span>
<span class="c1">##############################################################</span>
<span class="c1">#%%&lt;BEGIN TEST_INFO&gt;</span>
<span class="c1">#%% [setup]</span>
<span class="c1">#%% executable = abinit</span>
<span class="c1">#%% test_chain = tmbt_1.abi, tmbt_2.abi, tmbt_3.abi, tmbt_4.abi</span>
<span class="c1">#%% [files]</span>
<span class="c1">#%% [paral_info]</span>
<span class="c1">#%% max_nprocs = 64</span>
<span class="c1">#%% nprocs_to_test = 64</span>
<span class="c1">#%% [NCPU_64]</span>
<span class="c1">#%% files_to_test = tmbt_4_MPI64.abo, tolnlines = 0, tolabs = 1.100e-03, tolrel = 3.000e-03</span>
<span class="c1">#%% [extra_info]</span>
<span class="c1">#%% authors = M. Giantomassi</span>
<span class="c1">#%% keywords =  GW</span>
<span class="c1">#%% description = GW calculation for crystalline alpha-quartz. Sigma calculation</span>
<span class="c1">#%%&lt;END TEST_INFO&gt;</span>
</pre></div>
</div></div>

<script> $(function() { abidocs_jqueryui_dialog("#uuid-4b724d5b-cc6b-444a-8e59-e41c184e66e0", "#uuid-d3ac44bf-5a8e-4fd9-9619-da01c4acf5bc") }); </script>

<p>The most important parameters of the calculation are reported below:</p>
<div class="highlight"><pre><span></span><code>optdriver   4            # Sigma run.
irdwfk      1
irdscr      1
gwcalctyp   0 ppmodel 1  # G&lt;sub&gt;0&lt;/sub&gt;W&lt;sub&gt;0&lt;/sub&gt; calculation with the plasmon-pole approximation.
#gwcalctyp  2            # Uncomment this line to use the contour-deformation technique but remember to change the SCR file!
gwpara      2            # Parallelization over bands.
symsigma    1            # To enable the symmetrization of the self-energy matrix elements.
ecutwfn    24            # Cutoff for the wavefunctions.
ecuteps     8            # Cutoff in the correlation part.
ecutsigx   20            # Cutoff in the exchange part.
nband       50           # Number of bands for the correlation part.
</code></pre></div>
<p>For our purposes, it suffices to say that this input file defines a standard
one-shot calculation with the plasmon-pole model approximation. We refer to
the documentation and to the <a href="../gw1">first GW tutorial</a>
for a more complete description of the meaning of these variables.</p>
<p>Also in this case, we use <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a> = 2 to perform the calculation in parallel.
Note, however, that the distribution of the orbitals employed in the self-
energy part significantly differs from the one used to compute the screening.
In what follows, we briefly describe the two-step procedure used to distribute
the wavefunctions:</p>
<ol>
<li>
<p>Each node reads and stores in memory the states where the QP corrections are computed
   (the list of states specified by <a class="wikilink codevar-wikilink" href="../../variables/gw#kptgw">kptgw</a> and <a class="wikilink codevar-wikilink" href="../../variables/gw#bdgw">bdgw</a>).</p>
</li>
<li>
<p>The <a class="wikilink codevar-wikilink" href="../../variables/basic#nband">nband</a> bands are distributed using the following partition scheme:</p>
</li>
</ol>
<p><img alt="" src="../paral_mbt_assets/band_distribution_sigma.png" /></p>
<p>where we have assumed a calculation done with four nodes (the index in the box
   denotes the MPI rank).</p>
<p>By virtue of the particular distribution adopted, the computation of the
correlation part is expected to scale well with the number CPUs. The maximum
number of processors that can be used is limited by <a class="wikilink codevar-wikilink" href="../../variables/basic#nband">nband</a>. Note, however,
that only a subset of processors will receive the occupied states when the
bands are distributed in step 2. As a consequence, the theoretical maximum
speedup that can be obtained in the exchange part is limited by the
availability of the occupied states on the different MPI nodes involved in the run.</p>
<p>The best-case scenario is when the QP corrections are wanted for all the
occupied states. In this case, indeed, each node can compute part of the self-
energy and almost linear scaling should be reached. The worst-case scenario is
when the quasiparticle corrections are wanted only for a few states (e.g. band
gap calculations) and NCPU &gt;&gt; Nvalence. In this case, indeed, only Nvalence
processors will participate to the calculation of the exchange part.</p>
<p>To summarize: The MPI computation of the correlation part is efficient when
the number of processors divides <strong>nband</strong>. Optimal scaling in the exchange
part is obtained only when each node possesses the full set of occupied states.</p>
<p>The two figures below show the speedup of the sigma part as function of the
number of processors. The self-energy is calculated for 5 quasiparticle states
using nband=1024 (205 occupied states). Note that this setup is close to the
worst-case scenario. The computation of the self-energy matrix elements
(csigme) scales well up to 64 processors. For large number number of CPUs, the
scaling departs from the linear behavior due to the unbalanced distribution of
the occupied bands. The non-scalable parts of the implementation
(init1, rdkss) limit the total speedup due to Amdhal&rsquo;s law.</p>
<p><img alt="" src="../paral_mbt_assets/sigma_analysis.png" /></p>
<p>The implementation presents good memory scalability since the largest arrays
are distributed. Only the size of the screening does not scale with the number
of nodes. By default each CPU stores in memory the entire screening matrix for
all the q-points and frequencies in order to optimize the computation. In the
case of large matrices, however, it possible to opt for an out-of-core
solution in which only a single q-point is stored in memory and the data is
read from the external SCR file (slower but less memory demanding). This
option is controlled by the first digit of <a class="wikilink codevar-wikilink" href="../../variables/gw#gwmem">gwmem</a>.</p>
<p>Now that we know how distribute the load efficiently, we can finally run the
calculation using</p>
<div class="codehilite"><pre><span></span><code>(mpirun ...) abinit tmbt_4.abi &gt; tmbt_4.log 2&gt; err &amp;
</code></pre></div>

<p>Keep track of the time for each processor number so that we can test the
scalability of the self-energy part.</p>
<p>Please note that the results of these tests are not converged. A well
converged calculation would require a 6x6x6 k-mesh to sample the full BZ, and
a cutoff energy of 10 Ha for the screening matrix. The QP results converge
extremely slowly with respect to the number of empty states. To converge the
QP gaps within 0.1 eV accuracy, we had to include 1200 bands in the screening
and 800 states in the calculation of the self-energy.</p>
<p>The comparison between the LDA band structure and the G<sub>0</sub>W<sub>0</sub> energy bands of
-quartz SiO<sub>2</sub> is reported in the figure below. The direct gap at  is opened
up significantly from the LDA value of 6.1 eV to about 9.4 eV when the one-
shot G<sub>0</sub>W<sub>0</sub> method is used. You are invited to reproduce this result (take into
account that this calculation has been performed at the theoretical LDA
parameters, while the experimental structure is used in all the input files of
this tutorial).</p>
<p><img alt="" src="../paral_mbt_assets/SiO2_KSG0W0_PPM1.png" /></p>
<h2 id="5-basic-rules-for-efficient-parallel-calculations">5 Basic rules for efficient parallel calculations<a class="headerlink" href="#5-basic-rules-for-efficient-parallel-calculations" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Remember that &ldquo;Anything that can possibly go wrong, does&rdquo;. 
   So, when writing your input file, try to &ldquo;Keep It Short and Simple&rdquo;.</p>
</li>
<li>
<p>Do one thing and do it well:
  Avoid using different values of <a class="wikilink codevar-wikilink" href="../../variables/gstate#optdriver">optdriver</a> in the same input file. Each
  runlevel employs different approaches to distribute memory and CPU time, hence
  it is almost impossible to find the number of processors that will produce a
  balanced run in each dataset.</p>
</li>
<li>
<p>Prime number theorem:
  Convergence studies should be executed in parallel only when the parameters
  that are tested do not interfere with the MPI algorithm. For example, the
  convergence study in the number of bands in the screening should be done in
  separated input files when <a class="wikilink codevar-wikilink" href="../../variables/paral#gwpara">gwpara</a>=2 is used.</p>
</li>
<li>
<p>Less is more:
  Split big calculations into smaller runs whenever possible. For example,
  screening calculations can be split over q-points. The calculation of the
  self-energy can be easily split over <a class="wikilink codevar-wikilink" href="../../variables/gw#kptgw">kptgw</a> and <a class="wikilink codevar-wikilink" href="../../variables/gw#bdgw">bdgw</a>.</p>
</li>
<li>
<p>Look before you leap:
  Use the converge tests to estimate how the CPU-time and the memory
  requirements depend on the parameter that is tested. Having an estimate of the
  computing resources is very helpful when one has to launch the final
  calculation with converged parameters.</p>
</li>
</ol>
                
                  
                
              

<!-- 
add dropdown button with toolbar (based on https://bootsnipp.com/snippets/featured/inbox-by-gmail)
and return to Top button (based on https://codepen.io/rdallaire/pen/apoyx)
-->
<div class="md-container">
  <div class="row">
    <div id="inbox">
      <div class="fab btn-group show-on-hover dropup">
        <div data-toggle="tooltip" data-placement="left" title="Menu" style="margin-left: 42px;">
          <button id="return-to-top" type="button" class="btn btn-primary btn-io dropdown-toggle" data-toggle="dropdown">
            <span class="fa-stack fa-2x">
                <i class="fa fa-circle fa-stack-2x fab-backdrop"></i>
                <i class="fa fa-chevron-up fa-stack-1x fa-inverse fab-primary"></i>
                <i class="fa fa-map-signs fa-stack-1x fa-inverse fab-secondary"></i>
            </span>
          </button>
        </div>
        <ul class="dropdown-menu dropdown-menu-right" role="menu">
        
        
          <li><a href="../../about/release-notes/" data-toggle="tooltip" data-placement="left" 
                  title="About"><i class="fa fa-info-circle"></i></a></li>
        
          <li><a href="../../developers/git_and_gitlab/" data-toggle="tooltip" data-placement="left" 
                  title="Developers"><i class="fa fa-terminal"></i></a></li>
        
          <li><a href="../../theory/geometry/" data-toggle="tooltip" data-placement="left" 
                  title="Theory"><i class="fa fa-book"></i></a></li>
        
          <li><a href="../" data-toggle="tooltip" data-placement="left" 
                  title="Tutorial"><i class="fa fa-graduation-cap"></i></a></li>
        
          <li><a href="../../variables/" data-toggle="tooltip" data-placement="left" 
                  title="Variables"><i class="fa fa-file-text-o"></i></a></li>
        
          <li><a href="../../topics/features/" data-toggle="tooltip" data-placement="left" 
                  title="Topics"><i class="fa fa-question"></i></a></li>
        
          <li><a href="../.." data-toggle="tooltip" data-placement="left" 
                  title="User Guide"><i class="fa fa-user-circle-o"></i></a></li>
        
        <!--
        Example: 
        <li><a href="/index.html" data-toggle="tooltip" data-placement="left" title="User-Guide">
              <i class="fa fa-user-circle-o"></i></a></li>
        -->
        </ul>
      </div>
    </div>
  </div>
</div>

              
                
              
            </article>
          </div>
        </div>
      </main>
      
    <!-- Add tabs to footer -->
    
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../.." title="User Guide" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../topics/features/" title="Topics" class="md-tabs__link">
          Topics
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../variables/" title="Variables" class="md-tabs__link">
          Variables
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../" title="Tutorial" class="md-tabs__link md-tabs__link--active">
          Tutorial
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../theory/geometry/" title="Theory" class="md-tabs__link">
          Theory
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../developers/git_and_gitlab/" title="Developers" class="md-tabs__link">
          Developers
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../about/release-notes/" title="About" class="md-tabs__link">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
    
    
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../paral_images/" title="Images" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Images
              </span>
            </div>
          </a>
        
        
          <a href="../paral_moldyn/" title="Moldyn" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Moldyn
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
            <center>Abinit version 9.4.0</center>
        
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020-2021 The Abinit Group (MG, MS)
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/abinit/abinit" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/hashtag/abinit" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="http://www.facebook.com/abinit.org" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://www.youtube.com/watch?v=gcbfb_Mteo4" class="md-footer-social__link fa fa-youtube"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      

    </div>
    
      <script src="../../assets/javascripts/application.02434462.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
        <script src="../../extra_javascript/jquery.dialogextend.min.js"></script>
      
        <script src="../../extra_javascript/abidocs.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-116681470-1","docs.abinit.org"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>